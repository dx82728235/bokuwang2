function Main(container) {
    this.container = container;
    this.init();
}

Main.template = `
                <div class="ma w1200 ov-hd">
                    <p class="lh-50 cl-3">
                        您的当前位置：<a href="##">全部分类</a> > <a href="##">图书</a> > <a href="##">诗歌散文</a> > <a href="##">文集</a>
                    </p>
                    <div class="mt-20 book-deta">
                    
                    </div>
                    <div class="flexslide ov-hd w1200">
                    <!-- 列表轮播 -->
                    </div> <!-- 商品详情 评价 -->
                    <div class="mt-40 w1200 ov-hd">
                    <div class="good-side ov-hd wd-220 ta-ct bd-1-e8 fl">
                        <p class="fs-18 lh-50 bc-f3 ta-ct">新品推荐</p>
                        <ul>
                            <li class="bt-1-e8">
                                <div class="scale pd-10 ov-hd"><a class="db wd-218 ht-218" style="background: url(https://wdimg3.bookuu.com/goods/03/38/42/2019011330321712-50682.jpg) no-repeat center center;background-size: contain;"
                                        href="##"></a></div>
                                <div>
                                    <a href="##" class="db ht-36 lh-18 oh mt-5 cl-6 pd-0020">文心(叶圣陶的三十二堂国文课)</a>
                                </div>
                                <div class="lh-40">
                                    <span class="cl-rd">¥23.88</span>
                                    <span class="cl-9">|</span>
                                    <del class="fs-12 cl-9">¥39.80</del>
                                </div>
                            </li>
                            <li class="bt-1-e8">
                                <div class="scale pd-10 ov-hd"><a class="db wd-218 ht-218" style="background: url(https://wdimg3.bookuu.com/goods/03/38/42/2019011330321712-50682.jpg) no-repeat center center;background-size: contain;"
                                        href="##"></a></div>
                                <div>
                                    <a href="##" class="db ht-36 lh-18 oh mt-5 cl-6 pd-0020">文心(叶圣陶的三十二堂国文课)</a>
                                </div>
                                <div class="lh-40">
                                    <span class="cl-rd">¥23.88</span>
                                    <span class="cl-9">|</span>
                                    <del class="fs-12 cl-9">¥39.80</del>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="good-banner wd-838 ml-23 fl">
                        <!-- 商品详情 -->
                        <div class="bd-1-e8">
                            <div class="lh-50 ht-50 bc-f3 ta-ct clear">
                                <p class="wd-120 fl bc-f" id="link-detail2">商品详情</p>
                                <p class="db wd-120 fl" id="link-judge2">累计评价(<span class="cl-bl commentCount">1043</span>)</p>
                            </div>
                            <ul class="pd-3040 lh-30 cl-3">
                                <li class="wd-33p fl">
                                    <span>出版社：</span><span>三联书店</span>
                                </li>
                                <li class="wd-33p fl">
                                    <span>ISBN：</span><span>9787108042453</span>
                                </li>
                                <li class="wd-33p fl">
                                    <span>作者：</span><span>杨绛</span>
                                </li>
                                <li class="wd-33p fl">
                                    <span>页数：</span><span>165</span>
                                </li>
                                <li class="wd-33p fl">
                                    <span>出版日期：</span><span>2003-07-01</span>
                                </li>
                                <li class="wd-33p fl">
                                    <span>印刷日期：</span><span>2012-09-01</span>
                                </li>
                                <li class="wd-33p fl">
                                    <span>包装：</span><span>平装</span>
                                </li>
                                <li class="wd-33p fl">
                                    <span>开本：</span><span>32开 </span>
                                </li>
                                <li class="wd-33p fl">
                                    <span>版次：</span><span>1</span>
                                </li>
                                <li class="wd-33p fl">
                                    <span>印次：</span><span>37</span>
                                </li>
                                <li class="wd-33p fl">
                                    <span>字数：</span><span>90千字</span>
                                </li>
                                <div class="cb"></div>
                            </ul>
                        </div>
                        <!-- 大图 作者简介 书简介 -->
                        <div class="mt-20 pd-10 bd-1-e8 content_height">
                            <ul class="title-anchors">
                                <li>
                                    <p class='book-ban'>
                                        
                                    </p>
                                </li>
                                <li>
                                    <div class="anchor">
                                        <span>编辑推荐语</span>
                                    </div>
                                    <div class="lh-30 cl-6">
                                        <p>钱氏夫妇在学界德高望重，《围城》、《洗澡》两部畅销书*令他们声名远播。</p>
                                        <p><br></p>
                                        <p>然而，人们对其家庭生活却不甚了解。1998年，钱先生的逝世使文化界深感悲痛。</p>
                                        <p><br></p>
                                        <p>但罕为人知的是他和杨绛先生**的女儿钱瑗已于此前(1997年)先他们而去。</p>
                                        <p><br></p>
                                        <p>一生的伴侣、**的女儿相继离去，杨先生晚年之情景**人所能体味。</p>
                                        <p><br></p>
                                        <p>在人生的伴侣离去四年后，92岁高龄的杨先生用心记述了他们这个特殊家庭63年的风风雨雨、点点滴滴，结成回忆录《我们仨》。</p>
                                    </div>
                                </li>
                                <li>
                                    <div class="anchor anchor-box cp" id="anchor1">
                                        <label class="fl">
                                            内容提要
                                        </label>
                                        <div class="cb"></div>
                                    </div>


                                    <div class="lh-30 cl-6">
                                        <p>这本由杨绛所著的《我们仨》分为两部分。第一部分中，杨绛先生以其一贯的慧心、独特的笔法，用梦境的形式讲述了最后几年中一家三口相依为命的情感体验。</p>
                                        <p><br></p>
                                        <p>第二部分，以平实感人的文字记录了自1935年伉俪二
                                            人赴英国留学，并在牛津喜得爱女，直至1998年钱先生逝世63年间这个家
                                            庭鲜为人知的坎坷历程。</p>
                                        <p><br></p>
                                        <p>他们的足迹跨过半个地球，穿越风云多变的半个世纪：战火、疾病、政治风暴，生离死别……不论暴风骤雨，他们相濡以沫，美好的家庭已经成为杨先生一家人生最安全的庇护所。
                                            &nbsp; &nbsp;</p>
                                        <p><br></p>
                                        <p>《我们仨》适合文学爱好者阅读。</p>
                                    </div>
                                </li>
                                <li>
                                    <div class="anchor anchor-box cp" id="anchor2">
                                        <label class="fl">
                                            作者简介
                                        </label>
                                        <div class="cb"></div>
                                    </div>


                                    <div class="lh-30 cl-6">
                                        <p><span style="line-height: 24px; background-color: rgb(255, 255, 255); font-family: arial,helvetica,sans-serif; font-size: 16px;">杨绛(1911—)，原名杨季康，江苏无锡人。1932年苏州东吴大学毕业，同年入清华大学研究院研习。1934年开始发表作品。1935年留学英国、法国，1938年回国。先后任上海震旦女子文理学院教授、清华大学西语系教授。1949年后，任中国社会科学院外国文学所研究员。主要作品有剧本《称心如意》、《弄假成真》，论文集《春泥集》、《关于小说》，散文集《干校六记》。长篇小说《洗澡》．短篇小说集《倒影集》等。主要译著有《堂·吉诃德》、《小癞子》、《吉尔·布拉斯》等。</span></p>
                                    </div>
                                </li>
                                <li>
                                    <div class="anchor anchor-box cp" id="anchor3">
                                        <label class="fl">
                                            目录
                                        </label>
                                        <div class="cb"></div>
                                    </div>


                                    <div class="lh-30 cl-6">
                                        <p>**部<br>我们俩老了<br>第二部<br>我们仨失散了<br>(一)走上古驿道<br>(二)古驿道上相聚<br>(三)古驿道上相失<br>第三部<br>我一个人思念我们仨<br>附录一<br>附录二<br>附录三</p>
                                    </div>


                                </li>
                                <li>
                                    <div class="anchor anchor-box cp" id="anchor4">
                                        <label class="fl">
                                            精彩试读
                                        </label>
                                        <div class="cb"></div>
                                    </div>


                                    <div class="lh-30 cl-6">
                                        <p>&nbsp;已经是晚饭以后，他们父女两个玩得正酣。锺书怪可怜地大声求救：
                                            “娘，娘，阿圆欺我！”阿圆理直气壮地喊：“Mummy娘！爸爸做坏事！当场拿获！”(我们每个人都有许多称呼，随口叫。)
                                            &nbsp;&nbsp; <br></p>
                                        <p><br></p>
                                        <p>“做坏事”就是在她屋里捣乱。我走进阿圆卧房一看究竟。只见她床头枕上垒着高高一叠大辞典，上面放一只四脚朝天的小板凳，凳脚上端端正正站着一双沾满尘土的皮鞋—
                                            一显然是阿圆回家后刚脱下的，一只鞋里塞一个笔筒，里面有阿圆的毛笔
                                            、画笔、铅笔、圆珠笔等，另一只鞋里塞一个扫床的笤帚把。</p>
                                        <p><br></p>
                                        <p>沿着枕头是
                                            阿圆带回家的大书包。接下是横放着的一本一本大小各式的书，后面拖着
                                            我给阿圆的长把“鞋拔”，大概算是尾巴。阿圆站在床和书桌间的夹道里
                                            ，把爸爸拦在书桌和钢琴之间。</p>
                                        <p><br></p>
                                        <p>阿圆得意地说：“当场拿获！！”锺书把自己缩得不能再小，紧闭着眼说：“我不在这里！”他笑得
                                            都站不直了。我隔着他的肚皮，也能看到他肚子里翻滚的笑浪。阿圆说：“有这种alibi吗？”(注：alibi，不在犯罪现场的证据。)&nbsp;
                                            <br></p>
                                        <p><br></p>
                                        <p>我忍不住也笑了。三个人都在笑。客厅里电话铃响了几声，我们才听到。接电话照例是我的事(写回信是锺书的事)。我赶忙去接。没听清是谁打来的，只听到对方找钱锺书去开会。我忙说：“钱锺书还病着呢，我是他的老伴儿，我代他请假吧。”对方不理，只命令说：“明天报到，不带包，不带笔记本，上午九点有车来接。”
                                            &nbsp; <br></p>
                                        <p><br></p>
                                        <p>我忙说：“请问在什么地点报到？我可以让司机同志来代他请假。”
                                            &nbsp; &nbsp;对方说：“地点在山上，司机找不到。明天上午九点有车来接。不带
                                            包，不带笔记本。上午九点。”电话就挂断了。<br> &nbsp;
                                            &nbsp;锺书和阿圆都已听到我的对答。锤书早一溜烟过来坐在我旁边的沙发
                                            上。</p>
                                        <p><br></p>
                                        <p>阿圆也跟出来，挨着爸爸，坐在沙发的扶手上。她学得几句安慰小孩
                                            子的顺口溜，每逢爸爸“因病请假”，小儿赖学似的心虚害怕，就用来安
                                            慰爸爸：“提勒提勒耳朵，胡噜胡噜毛，我们的爸爸吓不着。”(“爸爸”
                                            原作“孩子”。)
                                            &nbsp; <br></p>
                                        <p><br></p>
                                        <p>&nbsp;我讲明了电话那边传来的话，很抱歉没敢问明开什么会。按说，锺书是八十四岁的老人了，又是大病之后，而且他也不担任什么需他开会的职
                                            务。我对锺书说：“明天车来，我代你去报到。”
                                            &nbsp;&nbsp; <br></p>
                                        <p><br></p>
                                        <p>锺书并不怪我不问问明白。他一声不响地起身到卧房去，自己开了衣柜的门，取出他出门穿的衣服，挂在衣架上，还挑了一条干净手绢，放在衣袋里。他是准备亲自去报到，不需我代表——他也许知道我不能代表。<br>
                                            &nbsp;&nbsp; <br></p>
                                        <p><br></p>
                                        <p>我和阿圆还只顾捉摸开什么会。锺书没精打采地干完他的晚事(洗洗换换)，乖乖地睡了。他向例早睡早起，我晚睡晚起，阿圆晚睡早起。第二天早上，阿圆老早做了自己的早饭，吃完就到学校上课去。我们两人的早饭总是锺书做的。</p>
                                        <p><br></p>
                                        <p>他烧开了水，泡上浓香的红茶，热了牛奶(我们吃牛奶红茶)，煮好老嫩合适的鸡蛋，用烤面包机烤好面包，从冰箱里拿出黄油、果酱等放在桌上。我起床和他一起吃早饭。然后我收拾饭桌，刷锅
                                            洗碗，等他穿着整齐，就一同下楼散散步，等候汽车来接。<br> &nbsp; <br></p>
                                        <p><br></p>
                                        <p>将近九点，我们同站在楼门口等待。开来一辆大黑汽车，车里出来一个穿**的司机。他问明钱锺书的身分，就开了车门，让他上车。随即关上车门，好像防我跟上去似的。我站在楼门口，眼看着那辆车稳稳地开走
                                            了。</p>
                                        <p><br></p>
                                        <p>我不识汽车是什么牌子，也没注意车牌的号码。我一个人上楼回家。自从去春锺书大病，我陪住医院护理，等到他病
                                            愈回家，我脚软头晕，成了风吹能倒的人。近期我才硬朗起来，能独立行走，不再需扶墙摸壁。但是我常常觉得年纪不饶人，我已力不从心。</p>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <!-- 累计评价 -->
                        <div class="anchor-judge"></div>
                    </div>
                </div>
                </div>
                `;


Main.prototype = {
    init: function () {
        this.createDom();
        this.getJson();
        this.Glass();
    },
    createDom: function () {
        this.el = $('<div></div>');
        this.el.append(Main.template);
        this.container.append(this.el);
        this.flexNav = new FlexNav(this.el.find('.flexslide'));
    },
    Glass: function () {
        this.el.on('mouseenter', '.action-pic', function () {
            var $smallImg = $('.action-img'),
                $bigImg = $('#big img'),
                $box = $('.action-pic')
            $mask = $('#mask')
            smallImgW = $smallImg.eq(0).width(),
                smallImgH = $smallImg.eq(0).height();
            $('#small').on({
                'mouseenter': function () {
                    $('#mask').show();
                    $('#big').show();
                },
                'mouseleave': function () {
                    $('#mask').fadeOut('slow');
                    $('#big').fadeOut("slow");
                },
                'mousemove': function (e) {
                    var bigImgW = $bigImg.eq(0).width();
                    var bigImgH = $bigImg.eq(0).height();
                    var x = e.pageX - $box.offset().left - $mask.width() / 2;
                    var y = e.pageY - $box.offset().top - $mask.height() / 2;
                    var maxL = $box.width() - $mask.width();
                    var maxT = $box.height() - $mask.height();
                    x = Math.min(Math.max(0, x), maxL);
                    y = Math.min(Math.max(0, y), maxT);
                    $mask.css({
                        left: x,
                        top: y,
                        backgroundPositionX: -x,
                        backgroundPositionY: -y
                    })
                    var bigImgLeft = x * bigImgW / smallImgW;
                    var bigImgTop = y * bigImgH / smallImgH;

                    $(".bigImage").css({
                        left: -bigImgLeft,
                        top: -bigImgTop
                    })
                }
            })


        })
    },
    getJson: function () {
        var str = location.href;
        var str = str.split('?')[1];
        var arr = str.split('&');
        var pid = arr[0].split('=')[1];
        var cname = arr[1].split('=')[1];

        $.ajax({
            type: 'get',
            url: '../json/goodcont.json',
            success: function (msg) {
                var str = "";

                for (var attr in msg) {
                    var msgs = msg[attr];

                    if (msgs.id == pid) {
                        str = ` <div class="action-top ov-hd dis-fl">
                        <div class="action-pic pr ht-430 wd-430 bd-1-f5" id='small'>
                            <img src="${msgs.bookpic}" alt="" class="action-img">
                            <div class='dn' id="mask"></div> 
                        </div>
                        <div class="action-big-pic bc-f dn" id='big'>
                            <img src="${msgs.bookpic}" alt="" class="bigImage wd-930 ht-930">
                        </div>
                        <div class="action-box wd-520">
                            <ul>
                                <li class="to-hd lh-40 fs-18 fw-bd cl-3 mb-10"><span>${msgs.name}</span></li>
                                <li class="fs-16 cl-9 ht-50 lh-25 mt-10 mb-10">
                                    <p>${msgs.abstract}</p>
                                </li>
                <li class="cl-9 mt-10 lh-30 mb-10">${msgs.author}<a href="##" class="cl-bl mr-50"></a></li>
                                <li class="bc-e5 pd-15">
                                    <p class="cl-9 lh-30">定 价<del class="cl-3 ml-35">￥${msgs.money}</del></p>
                                    <p class="cl-9 lh-30">售 价<span class="cl-rd ml-35">￥</span><span class="cl-rd fs-28">${msgs.money}</span></p>
                                </li>
                                <li class="pd-0015 mt-10 ht-92 ov-hd">
                                    <div class="ht-30 mt-20">
                                        <div class="fl cl-9 wd-70">销量</div>
                                        <div class="fl">${msgs.sum}件</div>
                                    </div>
                                    <div class="ht-30">
                                        <div class="fl cl-9 wd-70 mt-7 fl">数量</div>
                                        <div class="count-box mr-20 mt-2 ov-hd wd-80 ta-ct lh-28 fl">
                                            <div class="count-sub fl">-</div>
                                            <input type="text" value="1" class="fl">
                                            <div class="count-add fr">+</div>
                                        </div>
                                        <div class="cl-9 fl goods-store lh-30">
                                            <div>库存：<span>1</span></div>
                                        </div>
                                    </div>
                                </li>
                                <li class="ta-ct ov-hd">
                                    <div class="fs-18 cl-f bd-1-bl-d bc-bl pd-1030 mr-20 fl addcart cp">立即购买</div>
                                    <div class="fs-18 cl-bl bd-1-bl-d bc-bl-l pd-1030 mr-20 fl addcart cp"><span class="iconfont">&#xe64f;
                                        </span>加入购物车</div>
                                    <div class="cl-9 bd-1-a fl pd-0208 choose-box collect wd-46 ht-46 cp"><span class="iconfont">&#xe6cc;
                                        </span>收藏</div>
                                </li>
                                <li class="lh-60">
                                    <p class="cl-9 wd-70 fl">服务</p>
                                    <div class="fl">
                                        <div class="fl mr-30"><span class="iconfont cl-rd">&#xe69e; </span><span>正品保证</span></div>
                                        <div class="fl mr-30"><span class="iconfont cl-rd">&#xe69e; </span><span>七天无理由退换货</span></div>
                                        <div class="fl"><span class="iconfont cl-rd">&#xe69e; </span><span>赠送20积分</span></div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="action-right">
                            <div class="action-title">
                                <div class="wd-70 ht-70 bb-rd ov-hd fl mb-10"><img src="https://bnmpstyle.bookuu.com/wap/images/default_shop.png"
                                        alt="" class="wd-70 ht-70">
                                </div>
                                <p class="fl wd-120 pl-10 ov-hd mb-10">博库体验店</p>
                                <div class="lh-30 mt-15 fs-14">
                                    <a href="index.html" class="bd-1-e8 pd-0415 br-20 mr-20 cl-21">进入首页</a>
                                    <a href="##" class="bd-1-bl-l pd-0415 br-20 bc-bl cl-f">一键开店</a>
                                </div>
                            </div>
                            <div class="mt-20"><img src="https://bnmpstyle.bookuu.com/www/images/app.png" alt=""></div>
                        </div>
                    </div>
                    <div class="action-bottom wd-200p mr-5 fl db">
                        <p class="wd-76 ht-76 bd-2-2b" style="background: url(${msgs.bookpic}) no-repeat center center;background-size: contain;"></p>
                    </div>
                </div>`;

                        var banner = `<img src="${msgs.banner}" alt="" '>`;
                        this.el.find('.book-ban').html(banner);
                        this.el.find('.book-deta').html(str);
                    }
                }
            }.bind(this)
        })
    }
}